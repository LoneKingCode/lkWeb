@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout_Content.cshtml";
    ViewBag.Title = "操作日志";
}
@section Scripts{
    <script>
        $(function () {
            InitDataTable();
            $(".checkAll").click(function () {
                var check = $(this).prop("checked");
                $(".checkChild").prop("checked", check);
            });

          $("#btnSearch").click(function () {
                lkWeb.Search($("#txtSearchKey").val(), table_login);

            })

        });

        var table_operation;
        function InitDataTable() {
            var dataUrl = '@Url.Action("GetPageDataWithOperation")';   //后天获取json数据的地址
            var columns = [
                {
                    "sClass": "text-center",
                    "mData": "id",
                    "mRender": function (data, type, row) {
                        return '<input type="checkbox" class="checkChild"  value="' + data + '" />';
                    },
                    "bSortable": false
                },
                { "mData": "rowNum", "sClass": "text-center" },
                { "mData": "userName", "sClass": "text-center" },
                { "mData": "operationUrl", "sClass": "text-center" },
                { "mData": "operationDescription", "sClass": "text-center" },
                { "mData": "clientIP", "sClass": "text-center" },
                { "mData": "clientMac", "sClass": "text-center", "bSortable": false },
                { "mData": "createDateTime", "sClass": "text-center" }
            ];
            table_operation = lkWeb.LoadTable("table_operation", columns, dataUrl);
    }


    </script>
}


<div class="form-group">
    <div class="input-group">
        <input id="txtSearchKey" type="text" class="form-control" placeholder="搜索关键字">
        <span class="input-group-btn">
            <button id="btnSearch" class="btn btn-primary" type="button"> <i class="fa fa-search"></i> 搜索</button>
        </span>
    </div>
</div>
@Html.AntiForgeryToken()
<table class="table table-striped table-hover" id="table_operation">
    <thead>
        <tr>
            <th>
                <input type="checkbox" class="checkAll" />
            </th>
            <th>序号</th>
            <th>用户名</th>
            <th>操作地址</th>
            <th>操作说明</th>
            <th>登陆IP</th>
            <th>MAC地址</th>
            <th>操作时间</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
